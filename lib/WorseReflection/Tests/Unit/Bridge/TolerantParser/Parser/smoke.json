[
  "<?php\n\nnamespace Phpactor\\WorseReflection\\Bridge\\TolerantParser\\Parser;\n\nuse Microsoft\\PhpParser\\Node;\nuse Microsoft\\PhpParser\\Node\\SourceFileNode;\nuse Microsoft\\PhpParser\\Parser;\nuse Phpactor\\TolerantAstDiff\\AstDiff;\nuse Phpactor\\WorseReflection\\Core\\CacheForDocument;\nuse Phpactor\\WorseReflection\\Core\\Util\\NodeUtil;\nuse function DeepCopy\\deep_copy;\n\nclass MergingParser extends Parser\n{\n    /**\n     * @var array<string,SourceFileNode>\n     */\n    private $documents = [];\n\n    public function __construct(\n        private AstDiff $merger\n    ) {\n        parent::__construct();\n    }\n\n    public function parseSourceFile(string $source, ?string $uri = null): SourceFileNode\n    {\n        if (!$uri) {\n            return parent::parseSourceFile($source);\n        }\n\n        if ($uri === 'file://' . __FILE__) {\n            $h = fopen('files.json', 'a+');\n            fwrite($h, json_encode($source).\"\\n\");\n            fclose($h);\n        }\n\n        if (!isset($this->documents[$uri])) {\n            $node = parent::parseSourceFile($source, $uri);\n            $this->documents[$uri] = deep_copy($node);\n            return $node;\n        }\n\n\n        $node1 = $this->documents[$uri];\n\n        $start = microtime(true);\n\n        $node2 = parent::parseSourceFile($source, $uri);\n        $this->merger->merge($node1,   $node2);\n\n        return deep_copy($node1);\n    }\n}\n",
  "<?php\n\nnamespace Phpactor\\WorseReflection\\Bridge\\TolerantParser\\Parser;\n\nuse Microsoft\\PhpParser\\Node;\nuse Microsoft\\PhpParser\\Node\\SourceFileNode;\nuse Microsoft\\PhpParser\\Parser;\nuse Phpactor\\TolerantAstDiff\\AstDiff;\nuse Phpactor\\WorseReflection\\Core\\CacheForDocument;\nuse Phpactor\\WorseReflection\\Core\\Util\\NodeUtil;\nuse function DeepCopy\\deep_copy;\n\nclass MergingParser extends Parser\n{\n    /**\n     * @var array<string,SourceFileNode>\n     */\n    private $documents = [];\n\n    public function __construct(\n        private AstDiff $merger\n    ) {\n        parent::__construct();\n    }\n\n    public function parseSourceFile(string $source, ?string $uri = null): SourceFileNode\n    {\n        if (!$uri) {\n            return parent::parseSourceFile($source);\n        }\n\n        if ($uri === 'file://' . __FILE__) {\n            $h = fopen('files.json', 'a+');\n            fwrite($h, json_encode($source).\"\\n\");\n            fclose($h);\n        }\n\n        if (!isset($this->documents[$uri])) {\n            $node = parent::parseSourceFile($source, $uri);\n            $this->documents[$uri] = deep_copy($node);\n            return $node;\n        }\n\n\n        $node1 = $this->documents[$uri];\n\n        $start = microtime(true);\n\n        $node2 = parent::parseSourceFile($source, $uri);\n        $this->merger->merge($node1,   $node2);\n\n        return deep_copy($node1);\n    }\n}\n",
  "<?php\n\nnamespace Phpactor\\WorseReflection\\Bridge\\TolerantParser\\Parser;\n\nuse Microsoft\\PhpParser\\Node;\nuse Microsoft\\PhpParser\\Node\\SourceFileNode;\nuse Microsoft\\PhpParser\\Parser;\nuse Phpactor\\TolerantAstDiff\\AstDiff;\nuse Phpactor\\WorseReflection\\Core\\CacheForDocument;\nuse Phpactor\\WorseReflection\\Core\\Util\\NodeUtil;\nuse function DeepCopy\\deep_copy;\n\nclass MergingParser extends Parser\n{\n    /**\n     * @var array<string,SourceFileNode>\n     */\n    private $documents = [];\n\n    public function __construct(\n        private AstDiff $merger\n    ) {\n        parent::__construct();\n    }\n\n    public function parseSourceFile(string $source, ?string $uri = null): SourceFileNode\n    {\n        if (!$uri) {\n            return parent::parseSourceFile($source);\n        }\n\n        if ($uri === 'file://' . __FILE__) {\n            $h = fopen('files.json', 'a+');\n            fwrite($h, json_encode($source).\"\\n\");\n            fclose($h);\n        }\n\n        if (!isset($this->documents[$uri])) {\n            $node = parent::parseSourceFile($source, $uri);\n            $this->documents[$uri] = deep_copy($node);\n            return $node;\n        }\n\n\n        $node1 = $this->documents[$uri];\n\n        $start = microtime(true);\n\n        $node2 = parent::parseSourceFile($source, $uri);\n        $this->merger->merge($node1,   $node2);\n\n        return deep_copy($node1);\n    }\n}\n",
  "<?php\n\nnamespace Phpactor\\WorseReflection\\Bridge\\TolerantParser\\Parser;\n\nuse Microsoft\\PhpParser\\Node;\nuse Microsoft\\PhpParser\\Node\\SourceFileNode;\nuse Microsoft\\PhpParser\\Parser;\nuse Phpactor\\TolerantAstDiff\\AstDiff;\nuse Phpactor\\WorseReflection\\Core\\CacheForDocument;\nuse Phpactor\\WorseReflection\\Core\\Util\\NodeUtil;\nuse function DeepCopy\\deep_copy;\n\nclass MergingParser extends Parser\n{\n    /**\n     * @var array<string,SourceFileNode>\n     */\n    private $documents = [];\n\n    public function __construct(\n        private AstDiff $merger\n    ) {\n        parent::__construct();\n    }\n\n    public function parseSourceFile(string $source, ?string $uri = null): SourceFileNode\n    {\n        if (!$uri) {\n            return parent::parseSourceFile($source);\n        }\n\n        if ($uri === 'file://' . __FILE__) {\n            $h = fopen('files.json', 'a+');\n            fwrite($h, json_encode($source).\"\\n\");\n            fclose($h);\n        }\n\n        if (!isset($this->documents[$uri])) {\n            $node = parent::parseSourceFile($source, $uri);\n            $this->documents[$uri] = deep_copy($node);\n            return $node;\n        }\n\n\n        $node1 = $this->documents[$uri];\n\n        $start = microtime(true);\n\n        $node2 = parent::parseSourceFile($source, $uri);\n        if (false) {\n            $this->merger->merge($node1,   $node2);\n        }\n\n        return deep_copy($node1);\n    }\n}\n",
  "<?php\n\nnamespace Phpactor\\WorseReflection\\Bridge\\TolerantParser\\Parser;\n\nuse Microsoft\\PhpParser\\Node;\nuse Microsoft\\PhpParser\\Node\\SourceFileNode;\nuse Microsoft\\PhpParser\\Parser;\nuse Phpactor\\TolerantAstDiff\\AstDiff;\nuse Phpactor\\WorseReflection\\Core\\CacheForDocument;\nuse Phpactor\\WorseReflection\\Core\\Util\\NodeUtil;\nuse function DeepCopy\\deep_copy;\n\nclass MergingParser extends Parser\n{\n    /**\n     * @var array<string,SourceFileNode>\n     */\n    private $documents = [];\n\n    public function __construct(\n        private AstDiff $merger\n    ) {\n        parent::__construct();\n    }\n\n    public function parseSourceFile(string $source, ?string $uri = null): SourceFileNode\n    {\n        if (!$uri) {\n            return parent::parseSourceFile($source);\n        }\n\n        if ($uri === 'file://' . __FILE__) {\n            $h = fopen('files.json', 'a+');\n            fwrite($h, json_encode($source).\"\\n\");\n            fclose($h);\n        }\n\n        if (!isset($this->documents[$uri])) {\n            $node = parent::parseSourceFile($source, $uri);\n            $this->documents[$uri] = deep_copy($node);\n            return $node;\n        }\n\n\n        $node1 = $this->documents[$uri];\n\n        $start = microtime(true);\n\n        $node2 = parent::parseSourceFile($source, $uri);\n        if (false) {\n            $this->merger->merge($node1,   $node2);\n        }\n\n        return deep_copy($node1);\n    }\n}\n",
  "<?php\n\nnamespace Phpactor\\WorseReflection\\Bridge\\TolerantParser\\Parser;\n\nuse Microsoft\\PhpParser\\Node;\nuse Microsoft\\PhpParser\\Node\\SourceFileNode;\nuse Microsoft\\PhpParser\\Parser;\nuse Phpactor\\TolerantAstDiff\\AstDiff;\nuse Phpactor\\WorseReflection\\Core\\CacheForDocument;\nuse Phpactor\\WorseReflection\\Core\\Util\\NodeUtil;\nuse function DeepCopy\\deep_copy;\n\nclass MergingParser extends Parser\n{\n    /**\n     * @var array<string,SourceFileNode>\n     */\n    private $documents = [];\n\n    public function __construct(\n        private AstDiff $merger\n    ) {\n        parent::__construct();\n    }\n\n    public function parseSourceFile(string $source, ?string $uri = null): SourceFileNode\n    {\n        if (!$uri) {\n            return parent::parseSourceFile($source);\n        }\n\n        if ($uri === 'file://' . __FILE__) {\n            $h = fopen('files.json', 'a+');\n            fwrite($h, json_encode($source).\"\\n\");\n            fclose($h);\n        }\n\n        if (!isset($this->documents[$uri])) {\n            $node = parent::parseSourceFile($source, $uri);\n            $this->documents[$uri] = deep_copy($node);\n            return $node;\n        }\n\n\n        $node1 = $this->documents[$uri];\n\n        $start = microtime(true);\n\n        $node2 = parent::parseSourceFile($source, $uri);\n        if (false) {\n            $this->merger->merge($node1,   $node2);\n        }\n\n        return deep_copy($node1);\n    }\n}\n",
  "<?php\n\nnamespace Phpactor\\WorseReflection\\Bridge\\TolerantParser\\Parser;\n\nuse Microsoft\\PhpParser\\Node;\nuse Microsoft\\PhpParser\\Node\\SourceFileNode;\nuse Microsoft\\PhpParser\\Parser;\nuse Phpactor\\TolerantAstDiff\\AstDiff;\nuse Phpactor\\WorseReflection\\Core\\CacheForDocument;\nuse Phpactor\\WorseReflection\\Core\\Util\\NodeUtil;\nuse function DeepCopy\\deep_copy;\n\nclass MergingParser extends Parser\n{\n    /**\n     * @var array<string,SourceFileNode>\n     */\n    private $documents = [];\n\n    public function __construct(\n        private AstDiff $merger\n    ) {\n        parent::__construct();\n    }\n\n    public function parseSourceFile(string $source, ?string $uri = null): SourceFileNode\n    {\n        if (!$uri) {\n            return parent::parseSourceFile($source);\n        }\n\n        if ($uri === 'file://' . __FILE__) {\n            $h = fopen('files.json', 'a+');\n            fwrite($h, json_encode($source).\"\\n\");\n            fclose($h);\n        }\n\n        if (!isset($this->documents[$uri])) {\n            $node = parent::parseSourceFile($source, $uri);\n            $this->documents[$uri] = deep_copy($node);\n            return $node;\n        }\n\n\n        $node1 = $this->documents[$uri];\n\n        $start = microtime(true);\n\n        $node2 = parent::parseSourceFile($source, $uri);\n        if (false) {\n            $this->merger->merge($node1,   $node2);\n        }\n\n        return deep_copy($node1);\n    }\n}\n",
  "<?php\n\nnamespace Phpactor\\WorseReflection\\Bridge\\TolerantParser\\Parser;\n\nuse Microsoft\\PhpParser\\Node;\nuse Microsoft\\PhpParser\\Node\\SourceFileNode;\nuse Microsoft\\PhpParser\\Parser;\nuse Phpactor\\TolerantAstDiff\\AstDiff;\nuse Phpactor\\WorseReflection\\Core\\CacheForDocument;\nuse Phpactor\\WorseReflection\\Core\\Util\\NodeUtil;\nuse function DeepCopy\\deep_copy;\n\nclass MergingParser extends Parser\n{\n    /**\n     * @var array<string,SourceFileNode>\n     */\n    private $documents = [];\n\n    public function __construct(\n        private AstDiff $merger\n    ) {\n        parent::__construct();\n    }\n\n    public function parseSourceFile(string $source, ?string $uri = null): SourceFileNode\n    {\n        if (!$uri) {\n            return parent::parseSourceFile($source);\n        }\n\n        if ($uri === 'file://' . __FILE__) {\n            $h = fopen('files.json', 'a+');\n            fwrite($h, json_encode($source).\"\\n\");\n            fclose($h);\n        }\n\n        if (!isset($this->documents[$uri])) {\n            $node = parent::parseSourceFile($source, $uri);\n            $this->documents[$uri] = deep_copy($node);\n            return $node;\n        }\n\n\n        $node1 = $this->documents[$uri];\n\n        $start = microtime(true);\n\n        $node2 = parent::parseSourceFile($source, $uri);\n        if (false) {\n            $this->merger->merge($node1,   $node2);\n        } else {\n            $this->merger->merge($node1,   $node2);\n        }\n\n        return deep_copy($node1);\n    }\n}\n",
  "<?php\n\nnamespace Phpactor\\WorseReflection\\Bridge\\TolerantParser\\Parser;\n\nuse Microsoft\\PhpParser\\Node;\nuse Microsoft\\PhpParser\\Node\\SourceFileNode;\nuse Microsoft\\PhpParser\\Parser;\nuse Phpactor\\TolerantAstDiff\\AstDiff;\nuse Phpactor\\WorseReflection\\Core\\CacheForDocument;\nuse Phpactor\\WorseReflection\\Core\\Util\\NodeUtil;\nuse function DeepCopy\\deep_copy;\n\nclass MergingParser extends Parser\n{\n    /**\n     * @var array<string,SourceFileNode>\n     */\n    private $documents = [];\n\n    public function __construct(\n        private AstDiff $merger\n    ) {\n        parent::__construct();\n    }\n\n    public function parseSourceFile(string $source, ?string $uri = null): SourceFileNode\n    {\n        if (!$uri) {\n            return parent::parseSourceFile($source);\n        }\n\n        if ($uri === 'file://' . __FILE__) {\n            $h = fopen('files.json', 'a+');\n            fwrite($h, json_encode($source).\"\\n\");\n            fclose($h);\n        }\n\n        if (!isset($this->documents[$uri])) {\n            $node = parent::parseSourceFile($source, $uri);\n            $this->documents[$uri] = deep_copy($node);\n            return $node;\n        }\n\n\n        $node1 = $this->documents[$uri];\n\n        $start = microtime(true);\n\n        $node2 = parent::parseSourceFile($source, $uri);\n        if (false) {\n            $this->merger->merge($node1,   $node2);\n        } else {\n            $this->merger->merge($node1,   $node2);\n        }\n\n        return deep_copy($node1);\n    }\n}\n"
]
